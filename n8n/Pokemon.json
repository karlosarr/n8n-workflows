{
  "active": false,
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Execute No-SQL query": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "MongoDB Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Respond to Chat",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item List Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-04-30T19:59:54.178Z",
  "id": "PqeIhoq3SwAjIHLq",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Pokemon",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "id": "7ba56881-22bc-49ce-a702-5edf3b4c7a91",
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "position": [
        -16,
        -48
      ],
      "webhookId": "cf1de04f-3e38-426c-89f0-3bdb110a5dcf",
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "content": "### üë®‚Äçüé§ Setup\n1. Add your **postgresql** and **OpenAI** credentials.\n2. Click **Chat** button and start asking questions to your database.\n3. Activate the workflow and you can make the chat publicly available.",
        "height": 120,
        "width": 560,
        "color": 5
      },
      "id": "ae1ed4e4-d337-4bb7-99f9-8b51371311a9",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -480,
        -48
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "üõ†Ô∏è Tools Used:\n1. Execute SQL Query: Used to execute any query generated by the agent.\n2. Get DB Schema and Tables List: It returns the list of all the tables with its schema name.\n3. Get Table Definition: It returns table details like column names, foreign keys and more of a particular table in a schema.",
        "height": 156,
        "width": 562,
        "color": 7
      },
      "id": "be2e6b17-4dbe-44d9-a1c8-44fec7727274",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        672,
        544
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "üëÜ You can exchange this with any other chat model of your choice.",
        "height": 99,
        "width": 162,
        "color": 7
      },
      "id": "9356b4a5-1e35-41c0-872c-80072b47ce53",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        208,
        544
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "üëÜ You can change how many number of messages to keep using `Context Window Length` option. It's 5 by default.",
        "height": 159,
        "width": 162,
        "color": 7
      },
      "id": "f93dce97-e284-449a-9cb6-95aa56aa98a8",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        400,
        544
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        208,
        192
      ],
      "id": "a47b0980-78f5-4ded-b070-2aeac96a314e",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "bqQEfUn2F2rNgmbS",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "collection": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Collection', ``, 'string') }}",
        "options": {},
        "query": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Query__JSON_Format_', ``, 'json') }}"
      },
      "type": "n8n-nodes-base.mongoDbTool",
      "typeVersion": 1.1,
      "position": [
        464,
        224
      ],
      "id": "3da4255c-a5db-4f44-b310-928a48d1ad5c",
      "name": "Execute No-SQL query",
      "credentials": {
        "mongoDb": {
          "id": "Dquk6qU1mXON8Aw9",
          "name": "MongoDB account 2"
        }
      }
    },
    {
      "parameters": {
        "databaseName": "model"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryMongoDbChat",
      "typeVersion": 1,
      "position": [
        352,
        224
      ],
      "id": "601d6cdf-c787-4ac6-81e3-80aaaa09f891",
      "name": "MongoDB Chat Memory",
      "credentials": {
        "mongoDb": {
          "id": "BnGVpEkccvc6ypKL",
          "name": "MongoDB account"
        }
      }
    },
    {
      "parameters": {
        "hasOutputParser": true,
        "options": {
          "systemMessage": "Eres un asistente experto en N8N y MongoDB. Tu √∫nica funci√≥n es convertir una pregunta del usuario sobre Pok√©mon en un filtro JSON v√°lido para una operaci√≥n \"Find\" de MongoDB.\n\nLa colecci√≥n de Pok√©mon tiene la siguiente estructura de campos relevantes para la b√∫squeda:\n- `name`: (String) El nombre del Pok√©mon. Ejemplo: \"Bulbasaur\"\n- `id`: (String) El ID del Pok√©mon. Ejemplo: \"001\"\n\nReglas de conversi√≥n:\n1.  Si el usuario pregunta por un **nombre** (ej. \"Bulbasaur\", \"qui√©n es pikachu\", \"info de charmander\"), genera un filtro de b√∫squeda por el campo `name`. Debes usar una expresi√≥n regular (`$regex`) con la opci√≥n `i` (`$options: \"i\"`) para que la b√∫squeda no distinga may√∫sculas de min√∫sculas.\n2.  Si el usuario pregunta por un **ID** (ej. \"001\", \"el pok√©mon 25\", \"dame al 150\"), genera un filtro de b√∫squeda por el campo `id`.\n3.  Tu respuesta debe ser *√∫nicamente* el objeto JSON del filtro. No incluyas texto explicativo, ni \"```json\", ni saludos, ni ning√∫n otro texto.\n\nEjemplos:\n\nUsuario: \"Busca a Bulbasaur\"\nTu Respuesta:\n{\"name\": {\"$regex\": \"Bulbasaur\", \"$options\": \"i\"}}\n\nUsuario: \"Dame la informaci√≥n del pok√©mon con id 001\"\nTu Respuesta:\n{\"id\": \"001\"}\n\nUsuario: \"qui√©n es pikachu\"\nTu Respuesta:\n{\"name\": {\"$regex\": \"pikachu\", \"$options\": \"i\"}}\n\nUsuario: \"el n√∫mero 150\"\nTu Respuesta:\n{\"id\": \"150\"}\n\nUsuario: \"Charizard\"\nTu Respuesta:\n{\"name\": {\"$regex\": \"Charizard\", \"$options\": \"i\"}}\n\nAhora, procesa la siguiente entrada del usuario:"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        240,
        -48
      ],
      "id": "e3aa4ec0-d194-4138-81ec-55075d2f6daa",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "message": "={{ $json.output }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chat",
      "typeVersion": 1,
      "position": [
        592,
        -48
      ],
      "id": "84b4a324-658e-4a71-8ec9-c069dc1e72f5",
      "name": "Respond to Chat"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserItemList",
      "typeVersion": 1,
      "position": [
        576,
        256
      ],
      "id": "6589a852-cb28-42ba-8e64-6fede60e2361",
      "name": "Item List Output Parser"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "createdAt": "2025-04-30T19:59:54.183Z",
      "updatedAt": "2025-04-30T19:59:54.183Z",
      "role": "workflow:owner",
      "workflowId": "PqeIhoq3SwAjIHLq",
      "projectId": "Lv3MLaxzN78Feywb"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2025-11-01T19:47:09.000Z",
  "versionId": "99422253-075c-4f2a-90a8-a0f318ad8d4b"
}